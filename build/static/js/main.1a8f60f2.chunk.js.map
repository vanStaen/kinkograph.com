{"version":3,"sources":["component/PinInput/PinInput.jsx","pages/Gallery/getPictures.js","component/EditDrawer/getTags.js","store/pictureStore.js","store/calls/getUserInfo.js","store/calls/postUserFavorites.js","store/userStore.js","component/PictureThumb/PictureThumb.jsx","component/GalleryOverlay/GalleryOverlay.jsx","helpers/capitalizeFirstLetter.js","pages/Gallery/GalleryHeader/GalleryHeader.jsx","pages/Gallery/Gallery.jsx","component/EditDrawer/postTag.js","component/EditDrawer/patchPicture.js","component/EditDrawer/deletePicture.js","component/EditDrawer/EditDrawer.jsx","pages/Uploader/EditPictures/EditPictures.jsx","pages/Uploader/postPicture.js","pages/Uploader/getDuplicate.js","pages/Uploader/getTagsMissing.js","pages/Uploader/Uploader.jsx","store/calls/postLoginCode.js","App.jsx","reportWebVitals.js","index.js"],"names":["PinInput","props","useState","lastFiledInput","setLastFiledInput","keyDownListener","useCallback","event","preventDefault","keyPressed","key","toLowerCase","document","getElementById","value","length","code","setTimeout","focus","login","clickHandler","e","inputID","parseInt","target","id","lastInputWithData","blur","useEffect","addEventListener","removeEventListener","className","placeholder","maxLength","min","max","style","marginLeft","autoComplete","onClick","width","getPicturesPerPage","pageNumber","pageSize","a","filter","requestBody","axios","url","process","method","data","response","status","Error","getTotalPictures","count","getTags","getFilteredTags","pictureStore","PAGE_SIZE","totalPictures","selected","lastPageReached","showOverlay","isGalleryLoading","galleryNeedsRefresh","showFilterSelect","isTagInputActive","allPictures","tags","fetchPictures","pictures","setLastPageReached","Promise","all","map","picture","image","resolve","reject","loadImg","Image","src","url_thumb","onload","onerror","err","setTags","setAllPictures","setTotalPictures","console","log","setIsGalleryLoading","nextPageHandler","next","nextPage","previousPage","setPageNumber","setShowOverlay","changeSelected","maxSelectable","setSelected","addFilter","push","setFilter","setGalleryNeedsRefresh","setShowFilterSelect","setIsTagInputActive","makeObservable","this","observable","action","getUserInfo","postUserFavorites","favorites","JSON","stringify","userStore","isGuest","hasAccess","email","infos","name","username","isAdmin","addToFavorites","findIndex","pictureId","deleteFromFavorites","index","splice","setIsGuest","setHasAccess","setEmail","setInfos","setName","setUsername","setFavorites","setIsAdmin","fetchuserData","userData","parse","is_admin","PictureThumb","observer","isFavorite","mouseHoverHandler","hover","element","visibility","opacity","pic","onMouseEnter","onMouseLeave","alt","FullscreenOutlined","GalleryOverlay","isLoading","setIsLoading","throttling","useRef","isFirstPicFirstPage","isLastPicLastPage","loadImage","isloaded","url_med","closeButton","doubleClickHandler","heart","unheart","fontSize","keyDownHandler","nextButton","previousButton","current","backgroundColor","LeftOutlined","RightOutlined","placement","title","CloseOutlined","LoadingOutlined","onDoubleClick","role","aria-label","HeartFilled","tag","tagClickHander","capitalizeFirstLetter","string","undefined","charAt","toUpperCase","slice","GalleryHeader","Option","Select","handleTagChange","fitlerArray","fitlerArrayCleaned","onFocus","onBlur","mode","defaultValue","onChange","optionLabelProp","label","occur","Math","ceil","Gallery","scroll","direction","scrollToPositionY","eightyPerCentOfHeight","window","innerHeight","scrollPositionY","scrollY","top","left","behavior","nextPageLocalHandler","postTag","tag_name","patchPicture","deletePicture","EditDrawer","allTags","setAllTags","confirmDelete","setConfirmDelete","fetchAllTags","fetchedTags","hideDrawer","needReload","setShowUploader","setShowDrawer","reload","valueCleaned","oldTag","submitHandler","newTag","deleteHandler","closable","onClose","visible","showDrawer","maxWidth","maxHeight","allowClear","SaveOutlined","DeleteOutlined","QuestionOutlined","EditPictures","showEdit","setShowEdit","totalMissingTag","EditOutlined","size","height","postPicture","file","formData","FormData","append","post","getDuplicate","getTagsMissing","limit","getTagsMissingCountAll","Uploader","isUploading","setIsUploading","isDragDroping","setIsDragDroping","picsTagsMissing","setPicsTagsMissing","showUploader","uploadProgress","setUploadProgress","setLimit","missingCountAll","setMissingCountAll","result","notification","message","description","fetchTagsMissingCountAll","calculateMissingTagPicLimit","pageWidth","innerWidth","pageHeight","missingPicContainerWidth","floor","missingPicContainerHeight","numOfPicFittingInContainer","fetchPicsTagsMissing","fileSelectHandler","files","split","warning","handleDrop","stopPropagation","objectOfFiles","dataTransfer","numberOfFiles","i","onSubmit","type","htmlFor","onDrop","onDragOver","handleDragOver","onDragEnter","handleDragEnter","onDragLeave","handleDragLeave","FileAddOutlined","PictureOutlined","postLoginCode","App","res","userId","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.1a8f60f2.chunk.js","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\n\nimport \"./PinInput.css\";\n\nexport const PinInput = (props) => {\n  const [lastFiledInput, setLastFiledInput] = useState(1);\n\n  // TODO:\n  // alert(window.navigator.userAgent)\n  // https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser\n  // touchdevice\n\n  const keyDownListener = useCallback(\n    (event) => {\n      event.preventDefault();\n      const keyPressed = event.key.toLowerCase();\n      if (keyPressed === \"backspace\") {\n        if (lastFiledInput > 1) {\n          document.getElementById(lastFiledInput - 1).value = \"\";\n          setLastFiledInput(lastFiledInput - 1);\n        }\n      } else if (keyPressed.length > 1) {\n        // console.log(keyPressed);\n      } else {\n        document.getElementById(lastFiledInput).value = keyPressed;\n        setLastFiledInput(lastFiledInput + 1);\n        if (lastFiledInput + 1 === 7) {\n          setLastFiledInput(1);\n          const code =\n            document.getElementById(1).value +\n            document.getElementById(2).value +\n            document.getElementById(3).value +\n            document.getElementById(4).value +\n            document.getElementById(5).value +\n            document.getElementById(6).value;\n          setTimeout(() => {\n            document.getElementById(1).focus();\n            document.getElementById(1).value = \"\";\n            document.getElementById(2).value = \"\";\n            document.getElementById(3).value = \"\";\n            document.getElementById(4).value = \"\";\n            document.getElementById(5).value = \"\";\n            document.getElementById(6).value = \"\";\n            setLastFiledInput(1);\n            props.login(code);\n          }, 500);\n        }\n      }\n    },\n    [props, lastFiledInput]\n  );\n\n  const clickHandler = (e) => {\n    const inputID = parseInt(e.target.id, 10);\n    let lastInputWithData = lastFiledInput;\n    if (document.getElementById(1).value === \"\") {\n      lastInputWithData = 1;\n      setLastFiledInput(lastInputWithData);\n    } else if (document.getElementById(2).value === \"\") {\n      lastInputWithData = 2;\n      setLastFiledInput(lastInputWithData);\n    } else if (document.getElementById(3).value === \"\") {\n      lastInputWithData = 3;\n      setLastFiledInput(lastInputWithData);\n    } else if (document.getElementById(4).value === \"\") {\n      lastInputWithData = 4;\n      setLastFiledInput(lastInputWithData);\n    } else if (document.getElementById(5).value === \"\") {\n      lastInputWithData = 5;\n      setLastFiledInput(lastInputWithData);\n    } else if (document.getElementById(6).value === \"\") {\n      lastInputWithData = 6;\n      setLastFiledInput(lastInputWithData);\n    }\n    document.getElementById(inputID).blur();\n    document.getElementById(lastInputWithData).focus();\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", keyDownListener);\n    return () => {\n      document.removeEventListener(\"keydown\", keyDownListener);\n    };\n  }, [keyDownListener]);\n\n  return (\n    <div>\n      <form>\n        <input\n          id=\"1\"\n          className=\"PinInput__input\"\n          placeholder=\"_\"\n          maxLength=\"1\"\n          min=\"1\"\n          max=\"1\"\n          style={{ marginLeft: \"20px\" }}\n          autoComplete=\"new-password\"\n        />\n        <input\n          id=\"2\"\n          className=\"PinInput__input\"\n          placeholder=\"_\"\n          maxLength=\"1\"\n          min=\"1\"\n          max=\"1\"\n          onClick={clickHandler}\n          autoComplete=\"new-password\"\n        />\n        <input\n          id=\"3\"\n          className=\"PinInput__input\"\n          placeholder=\"_\"\n          maxLength=\"1\"\n          min=\"1\"\n          max=\"1\"\n          onClick={clickHandler}\n          autoComplete=\"new-password\"\n        />\n        <input\n          id=\"4\"\n          className=\"PinInput__input\"\n          placeholder=\"_\"\n          maxLength=\"1\"\n          min=\"1\"\n          max=\"1\"\n          onClick={clickHandler}\n          autoComplete=\"new-password\"\n        />\n        <input\n          id=\"5\"\n          className=\"PinInput__input\"\n          placeholder=\"_\"\n          maxLength=\"1\"\n          min=\"1\"\n          max=\"1\"\n          onClick={clickHandler}\n          autoComplete=\"new-password\"\n        />\n        <input\n          id=\"6\"\n          className=\"PinInput__input\"\n          placeholder=\"_\"\n          maxLength=\"1\"\n          min=\"1\"\n          max=\"1\"\n          onClick={clickHandler}\n          style={{ width: \"40px\" }}\n          autoComplete=\"new-password\"\n        />\n      </form>\n    </div>\n  );\n};\n","import axios from \"axios\";\n\nexport const getPictures = async (limit, showMissing) => {\n\n    const response = await axios({\n    url: process.env.REACT_APP_API_URL + `/pictures/all/${limit}/${showMissing}`,\n    method: \"GET\",\n  });\n\n  if ((response.status !== 200) & (response.status !== 201)) {\n    if (response.status === 401) {\n      throw new Error(`Error! Unauthorized(401)`);\n    } else {\n      throw new Error(`Error! Status ${response.status}`);\n    }\n  }\n\n  return response.data;\n\n};\n\nexport const getPicturesPerPage = async (pageNumber, pageSize, filter = \"\") => {\n\n  const requestBody = {\n    \"pageNumber\": pageNumber,\n    \"pageSize\": pageSize,\n    \"filter\": filter,\n  };\n\n  const response = await axios({\n      url: process.env.REACT_APP_API_URL + `/pictures/page`,\n      method: \"POST\",\n      data: requestBody,\n  });\n\n  if ((response.status !== 200) & (response.status !== 201)) {\n    if (response.status === 401) {\n      throw new Error(`Error! Unauthorized(401)`);\n    } else {\n      throw new Error(`Error! Status ${response.status}`);\n    }\n  }\n\n  return response.data;\n\n};\n\n\nexport const getTotalPictures = async (filter = \"\") => {\n\n  const requestBody = {\n    \"filter\": filter,\n  };\n\n  const response = await axios({\n      url: process.env.REACT_APP_API_URL + `/pictures/total/`,\n      method: \"POST\",\n      data: requestBody,\n  });\n\n  if ((response.status !== 200) & (response.status !== 201)) {\n    if (response.status === 401) {\n      throw new Error(`Error! Unauthorized(401)`);\n    } else {\n      throw new Error(`Error! Status ${response.status}`);\n    }\n  }\n\n  return response.data[0].count;\n  \n};\n","import axios from \"axios\";\n\nexport const getTags = async () => {\n\n    const response = await axios({\n        url: process.env.REACT_APP_API_URL + `/tags/`,\n        method: \"GET\",\n    });\n\n    if ((response.status !== 200) & (response.status !== 201)) {\n        if (response.status === 401) {\n            throw new Error(`Error! Unauthorized(401)`);\n        } else {\n            throw new Error(`Error! Status ${response.status}`);\n        }\n    }\n\n    return response.data;\n};\n\n\nexport const getFilteredTags = async (filter) => {\n\n    const requestBody = {\n        \"filter\": filter,\n      };\n\n    const response = await axios({\n        url: process.env.REACT_APP_API_URL + `/tags/filter`,\n        method: \"POST\",\n        data: requestBody,\n    });\n\n    if ((response.status !== 200) & (response.status !== 201)) {\n        if (response.status === 401) {\n            throw new Error(`Error! Unauthorized(401)`);\n        } else {\n            throw new Error(`Error! Status ${response.status}`);\n        }\n    }\n\n    return response.data;\n};","import { action, makeObservable, observable } from \"mobx\";\n\nimport {\n  getPicturesPerPage,\n  getTotalPictures,\n} from \"../pages/Gallery/getPictures\";\nimport { getFilteredTags } from \"../component/EditDrawer/getTags\";\n\nconst loadImage = (image) => {\n  return new Promise((resolve, reject) => {\n    const loadImg = new Image();\n    loadImg.src = image.url_thumb;\n    loadImg.onload = () => resolve(image.url);\n    loadImg.onerror = (err) => reject(err);\n  });\n};\n\nexport class PictureStore {\n  PAGE_SIZE = 100;\n\n  pageNumber = 1;\n  totalPictures = 0;\n  selected = null;\n  lastPageReached = false;\n  showOverlay = false;\n  isGalleryLoading = true;\n  galleryNeedsRefresh = true;\n  showFilterSelect = false;\n  isTagInputActive = false;\n  allPictures = [];\n  tags = [];\n  filter = [];\n\n  constructor() {\n    makeObservable(this, {\n      pageNumber: observable,\n      setPageNumber: action,\n      lastPageReached: observable,\n      setLastPageReached: action,\n      showOverlay: observable,\n      setShowOverlay: action,\n      selected: observable,\n      setSelected: action,\n      changeSelected: action,\n      allPictures: observable,\n      setAllPictures: action,\n      totalPictures: observable,\n      setTotalPictures: action,\n      filter: observable,\n      addFilter: action,\n      setFilter: action,\n      isGalleryLoading: observable,\n      setIsGalleryLoading: action,\n      galleryNeedsRefresh: observable,\n      setGalleryNeedsRefresh: action,\n      showFilterSelect: observable,\n      setShowFilterSelect: action,\n      fetchPictures: action,\n      nextPageHandler: action,\n      tags: observable,\n      setTags: action,\n      isTagInputActive: observable,\n      setIsTagInputActive: action,\n    });\n  }\n\n  fetchPictures = async () => {\n    try {\n      const pictures = await getPicturesPerPage(\n        this.pageNumber,\n        this.PAGE_SIZE,\n        this.filter\n      );\n      const totalPictures = await getTotalPictures(this.filter);\n      if (pictures.length < this.PAGE_SIZE) {\n        pictureStore.setLastPageReached(true);\n      } else {\n        pictureStore.setLastPageReached(false);\n      }\n      const tags = await getFilteredTags(this.filter);\n      await Promise.all(pictures.map((picture) => loadImage(picture)));\n      pictureStore.setTags(tags);\n\n      this.setAllPictures(pictures);\n      this.setTotalPictures(totalPictures);\n    } catch (err) {\n      console.log(err);\n    }\n    pictureStore.setIsGalleryLoading(false);\n  };\n\n  nextPageHandler = async (next) => {\n    pictureStore.setIsGalleryLoading(true);\n    if (next) {\n      const nextPage = this.pageNumber + 1;\n      this.pageNumber = nextPage;\n      await this.fetchPictures(nextPage);\n    } else {\n      const previousPage = this.pageNumber - 1;\n      this.pageNumber = previousPage;\n      await this.fetchPictures(previousPage);\n    }\n  };\n\n  setPageNumber = (pageNumber) => {\n    this.pageNumber = pageNumber;\n  };\n\n  setLastPageReached = (lastPageReached) => {\n    this.lastPageReached = lastPageReached;\n  };\n\n  setShowOverlay = (showOverlay) => {\n    this.showOverlay = showOverlay;\n  };\n\n  changeSelected = async (next) => {\n    const selected = this.selected;\n    const maxSelectable = this.allPictures.length - 1;\n    if (next) {\n      if (selected === maxSelectable) {\n        await this.nextPageHandler(true);\n        this.selected = 0;\n      } else {\n        this.selected = selected + 1;\n      }\n    } else {\n      if (selected === 0) {\n        await this.nextPageHandler(false);\n        this.selected = maxSelectable;\n      } else {\n        this.selected = selected - 1;\n      }\n    }\n  };\n\n  setSelected = async (selected) => {\n    this.selected = selected;\n  };\n\n  setAllPictures = (allPictures) => {\n    this.allPictures = allPictures;\n  };\n\n  setTotalPictures = (totalPictures) => {\n    this.totalPictures = totalPictures;\n  };\n\n  addFilter = async (filter) => {\n    await this.filter.push(filter);\n    pictureStore.setIsGalleryLoading(true);\n    pictureStore.setPageNumber(1);\n    pictureStore.fetchPictures();\n  };\n\n  setFilter = (filter) => {\n    this.filter = filter;\n    pictureStore.setIsGalleryLoading(true);\n    this.setPageNumber(1);\n    pictureStore.fetchPictures();\n  };\n\n  setIsGalleryLoading = (isGalleryLoading) => {\n    this.isGalleryLoading = isGalleryLoading;\n  };\n\n  setGalleryNeedsRefresh = (galleryNeedsRefresh) => {\n    this.galleryNeedsRefresh = galleryNeedsRefresh;\n  };\n\n  setShowFilterSelect = (showFilterSelect) => {\n    this.showFilterSelect = showFilterSelect;\n  };\n\n  setIsTagInputActive = (isTagInputActive) => {\n    this.isTagInputActive = isTagInputActive;\n  };\n\n  setTags = (tags) => {\n    this.tags = tags;\n  };\n}\n\nexport const pictureStore = new PictureStore();\n","import axios from \"axios\";\n\nexport const getUserInfo = async () => {\n\n    const response = await axios({\n        url: process.env.REACT_APP_API_URL + `/user`,\n        method: \"GET\",\n    });\n\n    if ((response.status !== 200) & (response.status !== 201)) {\n        if (response.status === 401) {\n            throw new Error(`Error! Unauthorized(401)`);\n        } else {\n            throw new Error(`Error! Status ${response.status}`);\n        }\n    }\n\n    return response.data[0];\n};","import axios from \"axios\";\n\nexport const postUserFavorites = async (favorites) => {\n\n    const requestBody = {\n        \"favorites\": JSON.stringify(favorites),\n    };\n\n    const response = await axios({\n        url: process.env.REACT_APP_API_URL + `/user/favorites`,\n        method: \"POST\",\n        data: requestBody,\n    });\n\n    if ((response.status !== 200) & (response.status !== 201)) {\n        if (response.status === 401) {\n            throw new Error(`Error! Unauthorized(401)`);\n        } else {\n            throw new Error(`Error! Status ${response.status}`);\n        }\n    }\n\n    return response;\n};","import { action, makeObservable, observable } from \"mobx\";\nimport { getUserInfo } from \"./calls/getUserInfo\";\nimport { postUserFavorites } from \"./calls/postUserFavorites\";\n\nexport class UserStore {\n  favorites = [];\n  isGuest = true;\n  hasAccess = false;\n  email = null;\n  infos = null;\n  name = \"there\";\n  username = null;\n  isAdmin = false;\n\n  constructor() {\n    makeObservable(this, {\n      favorites: observable,\n      addToFavorites: action,\n      setFavorites: action,\n      deleteFromFavorites: action,\n      isGuest: observable,\n      setIsGuest: action,\n      hasAccess: observable,\n      setHasAccess: action,     \n      fetchuserData: action,\n      setEmail: action,\n      email: observable,\n      setInfos: action,\n      infos: observable,\n      setName: action,\n      name: observable,\n      setUsername: action,\n      username: observable,\n      isAdmin: observable,\n      setIsAdmin: action,\n    });\n  }\n\n  addToFavorites = (id) => {\n    const index = this.favorites.findIndex((pictureId) => pictureId === id);\n    if (index < 0) {\n      this.favorites.push(id);\n    }\n    postUserFavorites(this.favorites);\n  };\n\n  deleteFromFavorites = (id) => {\n    const index = this.favorites.findIndex((pictureId) => pictureId === id);\n    this.favorites.splice(index, 1);\n    postUserFavorites(this.favorites);\n  };\n\n  setIsGuest = (isGuest) => {\n    this.isGuest = isGuest;\n  };\n\n  setHasAccess = (hasAccess) => {\n    this.hasAccess = hasAccess;\n  };\n\n  setEmail = (email) => {\n    this.email = email;\n  };\n\n  setInfos = (infos) => {\n    this.infos = infos;\n  };\n\n  setName = (name) => {\n    this.name = name;\n  };\n\n  setUsername = (username) => {\n    this.username = username;\n  };\n\n  setFavorites = (favorites) => {\n    this.favorites = favorites;\n  };\n\n  setIsAdmin = (isAdmin) => {\n    this.isAdmin = isAdmin;\n  };\n\n  fetchuserData = async () => {\n    const userData = await getUserInfo();\n    userStore.setEmail(userData.email);\n    userStore.setInfos(userData.infos);\n    userStore.setName(userData.name);\n    userStore.setUsername(userData.username);\n    if (userData.favorites) {\n      userStore.setFavorites(JSON.parse(userData.favorites));\n    }\n    if (userData.is_admin) {\n      userStore.setIsAdmin(userData.is_admin);\n    }\n  };\n}\n\nexport const userStore = new UserStore();\n","import React, { Fragment } from \"react\";\nimport { FullscreenOutlined } from \"@ant-design/icons\";\nimport { observer } from \"mobx-react\";\n\nimport { pictureStore } from \"../../store/pictureStore\";\nimport { userStore } from \"../../store/userStore\";\nimport \"./PictureThumb.css\";\n\nexport const PictureThumb = observer((props) => {\n  const isFavorite = userStore.favorites.findIndex(\n    (id) => id === props.picture.id\n  );\n\n  const mouseHoverHandler = (hover) => {\n    const element = document.getElementById(`tag_${props.picture.id}`);\n    const picture = document.getElementById(`pic_${props.picture.id}`);\n    if (hover) {\n      element.style.visibility = \"visible\";\n      element.style.opacity = 1;\n      picture.style.filter = \"brightness(50%) grayscale(1)\";\n    } else {\n      element.style.visibility = \"hidden\";\n      element.style.opacity = 0;\n      picture.style.filter = \"brightness(100%) grayscale(0)\";\n    }\n  };\n\n  const clickHandler = () => {\n    pictureStore.setShowOverlay(true);\n    const index = pictureStore.allPictures.findIndex(\n      (pic) => pic.id === props.picture.id\n    );\n    pictureStore.setSelected(index);\n  };\n\n  return (\n    <Fragment>\n      <div\n        className=\"picture__container\"\n        onClick={clickHandler}\n        onMouseEnter={() => mouseHoverHandler(true)}\n        onMouseLeave={() => mouseHoverHandler(false)}\n      >\n        <img\n          id={`pic_${props.picture.id}`}\n          className={`picture \n          ${!props.picture.tags && \"picture__bluryGray\"} \n          ${isFavorite >= 0 && \"halo\"} `}\n          src={props.picture.url_thumb}\n          alt={props.picture.id}\n          key={props.picture.id}\n        />\n        <div className=\"picture__tagMissing\">\n          {!props.picture.tags && \"TAGS MISSING\"}\n        </div>\n        <div id={`tag_${props.picture.id}`} className=\"picture__tagShow\">\n          <FullscreenOutlined />\n          <div className=\"picture__id\">#{props.picture.id}</div>\n        </div>\n      </div>\n    </Fragment>\n  );\n});\n","import React, {\n  Fragment,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from \"react\";\nimport {\n  LeftOutlined,\n  RightOutlined,\n  CloseOutlined,\n  HeartFilled,\n  LoadingOutlined,\n} from \"@ant-design/icons\";\nimport { observer } from \"mobx-react\";\nimport { Tooltip } from \"antd\";\n\nimport { pictureStore } from \"../../store/pictureStore\";\nimport { userStore } from \"../../store/userStore\";\n\nimport \"./GalleryOverlay.css\";\n\nexport const GalleryOverlay = observer(() => {\n  const [isLoading, setIsLoading] = useState(true);\n  const throttling = useRef(false);\n  const selected = pictureStore.allPictures[pictureStore.selected];\n  const indexInSelected = userStore.favorites.findIndex(\n    (pictureId) => pictureId === selected.id\n  );\n  const isFavorite = indexInSelected >= 0;\n  const isFirstPicFirstPage =\n    pictureStore.pageNumber === 1 && pictureStore.selected === 0;\n  const isLastPicLastPage =\n    pictureStore.lastPageReached &&\n    pictureStore.allPictures.length === pictureStore.selected + 1;\n\n  const loadImage = async (image) => {\n    setIsLoading(true);\n    const isloaded = new Promise((resolve, reject) => {\n      const loadImg = new Image();\n      loadImg.src = image;\n      loadImg.onload = () => resolve(image.url);\n      loadImg.onerror = (err) => reject(err);\n    });\n    await isloaded;\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    selected && loadImage(selected.url_med);\n  }, [selected]);\n\n  const mouseHoverHandler = (hover) => {\n    const closeButton = document.getElementById(`closeButton`);\n    if (hover) {\n      closeButton.style.visibility = \"hidden\";\n      closeButton.style.opacity = 0;\n    } else {\n      closeButton.style.visibility = \"visible\";\n      closeButton.style.opacity = 1;\n    }\n  };\n\n  const doubleClickHandler = useCallback(\n    (id) => {\n      const heart = document.getElementById(`heart`);\n      const unheart = document.getElementById(`unheart`);\n      if (!isFavorite) {\n        heart.style.visibility = \"visible\";\n        heart.style.opacity = 0.5;\n        heart.style.fontSize = \"50em\";\n        setTimeout(() => {\n          heart.style.visibility = \"hidden\";\n          heart.style.opacity = 0;\n          heart.style.fontSize = \"1em\";\n        }, 500);\n        userStore.addToFavorites(id);\n      } else {\n        unheart.style.visibility = \"visible\";\n        unheart.style.opacity = 0.5;\n        unheart.style.fontSize = \"30em\";\n        setTimeout(() => {\n          unheart.style.visibility = \"hidden\";\n          unheart.style.opacity = 0;\n          unheart.style.fontSize = \"1em\";\n        }, 500);\n        userStore.deleteFromFavorites(id);\n      }\n    },\n    [isFavorite]\n  );\n\n  const keyDownHandler = useCallback(\n    (event) => {\n      event.preventDefault();\n      const keyPressed = event.key.toLowerCase();\n      const nextButton = document.getElementById(`nextButton`);\n      const previousButton = document.getElementById(`previousButton`);\n      if (throttling.current === false) {\n        throttling.current = true;\n        if (\n          (keyPressed === \"arrowdown\" || keyPressed === \"arrowright\") &&\n          !isLastPicLastPage\n        ) {\n          nextButton.style.backgroundColor = \"rgba(255,255,255,.15)\";\n          pictureStore.changeSelected(true);\n          setTimeout(() => {\n            nextButton.style.backgroundColor = \"rgba(255,255,255, 0)\";\n          }, 100);\n        } else if (\n          (keyPressed === \"arrowup\" || keyPressed === \"arrowleft\") &&\n          !isFirstPicFirstPage\n        ) {\n          previousButton.style.backgroundColor = \"rgba(255,255,255,.15)\";\n          pictureStore.changeSelected(false);\n          setTimeout(() => {\n            previousButton.style.backgroundColor = \"rgba(255,255,255, 0)\";\n          }, 100);\n        } else if (keyPressed === \"enter\") {\n          doubleClickHandler(selected.id);\n        } else if (keyPressed === \"escape\") {\n          pictureStore.setShowOverlay(false);\n        }\n        setTimeout(() => {\n          throttling.current = false;\n        }, 100);\n      }\n    },\n    [selected, doubleClickHandler, isFirstPicFirstPage, isLastPicLastPage]\n  );\n\n  const tagClickHander = (tag) => {\n    pictureStore.setShowOverlay(false);\n    pictureStore.addFilter(tag);\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", keyDownHandler);\n    return () => {\n      document.removeEventListener(\"keydown\", keyDownHandler);\n    };\n  }, [keyDownHandler]);\n\n  return (\n    <div className=\"overlay__overlay\">\n      <div\n        className=\"overlay__background\"\n        onClick={() => {\n          pictureStore.setShowOverlay(false);\n        }}\n      ></div>\n      {!isFirstPicFirstPage && (\n        <div\n          className=\"overlay__columnLeft\"\n          id=\"previousButton\"\n          onClick={() => {\n            pictureStore.changeSelected(false);\n          }}\n        >\n          <LeftOutlined />\n        </div>\n      )}\n      {!isLastPicLastPage && (\n        <div\n          className=\"overlay__columnRight\"\n          id=\"nextButton\"\n          onMouseEnter={() => mouseHoverHandler(true)}\n          onMouseLeave={() => mouseHoverHandler(false)}\n          onClick={() => {\n            pictureStore.changeSelected(true);\n          }}\n        >\n          <RightOutlined />\n        </div>\n      )}\n      <Tooltip\n        placement=\"bottomLeft\"\n        title={\n          <span>\n            <b>TIP: </b> The keys ← and → will let you navigate through the\n            pictures. You can use the <i>esc</i> key, or click outside the\n            picture to go back to the gallery.\n          </span>\n        }\n      >\n        <div\n          className=\"overlay__closeButton\"\n          id=\"closeButton\"\n          onClick={() => {\n            pictureStore.setShowOverlay(false);\n          }}\n        >\n          <CloseOutlined />\n        </div>\n      </Tooltip>\n      {isLoading ? (\n        <LoadingOutlined className=\"overlay__spinner\" />\n      ) : (\n        <div\n          className=\"overlay__pictureContainer\"\n          onDoubleClick={() => {\n            doubleClickHandler(selected.id);\n          }}\n        >\n          <div className=\"overlay__infoAction\">\n            {selected && <div className=\"overlay__info\">#{selected.id}</div>}\n            <div className=\"overlay__action\">\n              {isFavorite ? (\n                <Fragment>\n                  <span\n                    role=\"img\"\n                    aria-label=\"heart\"\n                    style={{ fontSize: \".75em\" }}\n                  >\n                    ❤️\n                  </span>{\" \"}\n                  Marked as favorite!\n                </Fragment>\n              ) : (\n                \"Doubleclick/Enter to mark as favorite.\"\n              )}\n            </div>\n          </div>\n          <div className=\"overlay__pictureHover\">\n            <div className=\"overlay__pictureWatermark\">KINKOGRAPH</div>\n            <HeartFilled id=\"heart\" className=\"overlay__heart\" />\n            <CloseOutlined id=\"unheart\" className=\"overlay__heart\" />\n          </div>\n          {selected && (\n            <img\n              className=\"overlay__picture\"\n              src={selected.url_med}\n              alt={selected.id}\n              key={`img__${selected.id}`}\n            />\n          )}\n          {selected && (\n            <div className=\"overlay__tags\">\n              {JSON.parse(selected.tags).map((tag) => (\n                <Fragment>\n                  <span onClick={() => tagClickHander(tag)}>#{tag}</span>\n                  &nbsp;\n                </Fragment>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n});\n","\n  export function capitalizeFirstLetter(string) {\n      if (string === undefined || string === null) {\n          return null;\n      }\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  }","import React, { Fragment, useCallback } from \"react\";\nimport { observer } from \"mobx-react\";\nimport { Select, Tooltip } from \"antd\";\n\nimport { pictureStore } from \"../../../store/pictureStore\";\nimport { userStore } from \"../../../store/userStore\";\nimport { capitalizeFirstLetter } from \"../../../helpers/capitalizeFirstLetter\";\n\nimport \"./GalleryHeader.css\";\n\nexport const GalleryHeader = observer(() => {\n  const { Option } = Select;\n\n  const handleTagChange = useCallback(async (fitlerArray) => {\n    pictureStore.setIsGalleryLoading(true);\n    const fitlerArrayCleaned = fitlerArray.map((tag) => {\n      return capitalizeFirstLetter(tag);\n    });\n    pictureStore.setFilter(fitlerArrayCleaned);\n  }, []);\n\n  const handleClickFilterTitle = () => {\n    pictureStore.setShowFilterSelect(true);\n  };\n\n  return (\n    <div className=\"galleryHeader__main\">\n      <div className=\"galleryHeader__left\">\n        {userStore.favorites.length ? (\n          <Fragment>\n            <div className=\"galleryHeader__BigFont galleryHeader__favorite\">\n              {userStore.favorites.length} picture\n              {userStore.favorites.length > 1 && \"s\"}\n            </div>\n            <div className=\"galleryHeader__SmallFont\">\n              marked as favorite{userStore.favorites.length > 1 && \"s\"}\n            </div>\n          </Fragment>\n        ) : (\n          <Fragment>\n            <div className=\"galleryHeader__BigFont galleryHeader__favorite\">\n              Hello {userStore.name},\n            </div>\n            <div className=\"galleryHeader__SmallFont\">\n              What will inspire you today?\n            </div>\n          </Fragment>\n        )}\n      </div>\n      <div\n        className=\"galleryHeader__center\"\n        onFocus={() => {\n          pictureStore.setIsTagInputActive(true);\n        }}\n        onBlur={() => {\n          pictureStore.setIsTagInputActive(false);\n        }}\n      >\n        {pictureStore.filter.length > 0 || pictureStore.showFilterSelect ? (\n          <Select\n            mode=\"multiple\"\n            style={{ width: \"100%\" }}\n            placeholder=\"Select a filter\"\n            defaultValue={pictureStore.filter}\n            onChange={handleTagChange}\n            className=\"galleryHeader__selectFilter\"\n            optionLabelProp=\"label\"\n          >\n            {pictureStore.tags.map((tag) => {\n              return (\n                <Option value={tag.tag} label={tag.tag}>\n                  <div className=\"demo-option-label-item\">\n                    {tag.tag} <span className=\"light\">({tag.occur})</span>\n                  </div>\n                </Option>\n              );\n            })}\n          </Select>\n        ) : (\n          <div\n            className=\"galleryHeader__setFilter\"\n            onClick={handleClickFilterTitle}\n          >\n            &#123;click here to{\" \"}\n            <span className=\"galleryHeader__wordFilter\">filter</span> the\n            results&#125;\n          </div>\n        )}\n      </div>\n      <div className=\"galleryHeader__right\">\n        <Tooltip\n          placement=\"bottomRight\"\n          title={\n            <span>\n              <b>TIP: </b>You can use the ← and → keys to navigate through the\n              pages, and the ↑ and ↓ keys to scroll the page.\n            </span>\n          }\n        >\n          <div className=\"galleryHeader__pageInfo\">\n            <div className=\"galleryHeader__BigFont\">\n              <b>Page {pictureStore.pageNumber}</b>\n              <span style={{ fontSize: \"0.7em\" }}>\n                {\" \"}\n                /{\" \"}\n                {Math.ceil(\n                  pictureStore.totalPictures / pictureStore.PAGE_SIZE,\n                  0\n                )}\n              </span>\n            </div>\n            <div className=\"galleryHeader__SmallFont\">\n              {(pictureStore.pageNumber - 1) * pictureStore.PAGE_SIZE + 1}-\n              {Math.min(\n                pictureStore.pageNumber * pictureStore.PAGE_SIZE,\n                pictureStore.totalPictures\n              )}{\" \"}\n              of {pictureStore.totalPictures}\n            </div>\n          </div>\n        </Tooltip>\n      </div>\n    </div>\n  );\n});\n","import React, { useRef, useEffect, useCallback, Fragment } from \"react\";\nimport { LoadingOutlined } from \"@ant-design/icons\";\nimport { observer } from \"mobx-react\";\n\nimport { pictureStore } from \"../../store/pictureStore\";\nimport { PictureThumb } from \"../../component/PictureThumb/PictureThumb\";\nimport { GalleryOverlay } from \"../../component/GalleryOverlay/GalleryOverlay\";\nimport { GalleryHeader } from \"./GalleryHeader/GalleryHeader\";\n\nimport \"./Gallery.css\";\n\nexport const Gallery = observer(() => {\n  const throttling = useRef(false);\n\n  useEffect(() => {\n    if (pictureStore.galleryNeedsRefresh) {\n      pictureStore.fetchPictures();\n      pictureStore.setGalleryNeedsRefresh(false);\n    }\n    // eslint-disable-next-line\n  }, [pictureStore.galleryNeedsRefresh]);\n\n  const scroll = useCallback((direction) => {\n    const eightyPerCentOfHeight = window.innerHeight * 0.8;\n    const scrollPositionY = window.scrollY;\n    let scrollToPositionY;\n    if (direction === \"down\") {\n      scrollToPositionY = scrollPositionY + eightyPerCentOfHeight;\n    } else if (direction === \"up\") {\n      scrollToPositionY = Math.max(scrollPositionY - eightyPerCentOfHeight, 0);\n    }\n    window.scroll({\n      top: scrollToPositionY,\n      left: 0,\n      behavior: \"smooth\",\n    });\n  }, []);\n\n  const keyDownHandler = useCallback(\n    (event) => {\n      const keyPressed = event.key.toLowerCase();\n      if (\n        keyPressed === \"arrowright\" ||\n        keyPressed === \"arrowleft\" ||\n        keyPressed === \"arrowdown\" ||\n        keyPressed === \"arrowup\"\n      ) {\n        event.preventDefault();\n        if (!pictureStore.showOverlay && !pictureStore.isTagInputActive) {\n          if (throttling.current === false) {\n            throttling.current = true;\n            if (keyPressed === \"arrowright\" && !pictureStore.lastPageReached) {\n              pictureStore.setShowFilterSelect(false);\n              nextPageLocalHandler(true);\n            } else if (\n              keyPressed === \"arrowleft\" &&\n              pictureStore.pageNumber > 1\n            ) {\n              pictureStore.setShowFilterSelect(false);\n              nextPageLocalHandler(false);\n            } else if (keyPressed === \"arrowdown\") {\n              scroll(\"down\");\n            } else if (keyPressed === \"arrowup\") {\n              scroll(\"up\");\n            }\n            setTimeout(() => {\n              throttling.current = false;\n            }, 100);\n          }\n        }\n      }\n    },\n    [scroll]\n  );\n\n  const nextPageLocalHandler = async (value) => {\n    await pictureStore.nextPageHandler(value);\n    window.scroll({\n      top: 0,\n      left: 0,\n      behavior: \"smooth\",\n    });\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", keyDownHandler);\n    return () => {\n      document.removeEventListener(\"keydown\", keyDownHandler);\n    };\n  }, [keyDownHandler]);\n\n  return (\n    <div className=\"gallery\">\n      <GalleryHeader />\n      {pictureStore.isGalleryLoading ? (\n        <div className=\"App__flex\">\n          <LoadingOutlined className=\"Gallery__spinner\" />\n          <div className=\"gallery__spinnerText\">loading</div>\n        </div>\n      ) : (\n        <Fragment>\n          {pictureStore.showOverlay && <GalleryOverlay />}\n          <div>\n            <div className=\"gallery__main\">\n              {pictureStore.allPictures.map((picture, index) => {\n                return (\n                  <div className=\"gallery__picSpacer\">\n                    <PictureThumb picture={picture} key={picture.id} />\n                  </div>\n                );\n              })}\n            </div>\n            <div className=\"gallery__next\">\n              <div className=\"gallery__nextTextContainer\">\n                {pictureStore.pageNumber === 1 ? (\n                  \"Previous\"\n                ) : (\n                  <span\n                    className=\"gallery__nextText\"\n                    onClick={() => nextPageLocalHandler(false)}\n                  >\n                    Previous\n                  </span>\n                )}\n                {\" | \"}\n                {pictureStore.lastPageReached ? (\n                  \"Next\"\n                ) : (\n                  <span\n                    className=\"gallery__nextText\"\n                    onClick={() => nextPageLocalHandler(true)}\n                  >\n                    Next\n                  </span>\n                )}\n              </div>\n            </div>\n          </div>\n        </Fragment>\n      )}\n    </div>\n  );\n});\n\n/*\n<div className=\"item item__landscape\">item__landscape</div>\n<div className=\"item item__square\">item__square</div>\n<div className=\"item item__portrait\">item__portrait</div>\n*/\n","import axios from \"axios\";\n\nexport const postTag = async (tag_name) => {\n\n    const requestBody = {\n        \"tag_name\": tag_name,\n    };\n\n    const response = await axios({\n        url: process.env.REACT_APP_API_URL + `/tags/`,\n        method: \"POST\",\n        data: requestBody,\n    });\n\n    if ((response.status !== 200) & (response.status !== 201)) {\n        if (response.status === 401) {\n            throw new Error(`Error! Unauthorized(401)`);\n        } else {\n            throw new Error(`Error! Status ${response.status}`);\n        }\n    }\n\n    return response.data;\n};","import axios from \"axios\";\n\nexport const patchPicture = async (tags, id) => {\n\n    const requestBody = {\n        \"tags\": JSON.stringify(tags)\n    };\n\n    const response = await axios({\n        url: process.env.REACT_APP_API_URL + `/pictures/${id}`,\n        method: \"PATCH\",\n        data: requestBody,\n    });\n\n    if ((response.status !== 200) & (response.status !== 201)) {\n        if (response.status === 401) {\n            throw new Error(`Error! Unauthorized(401)`);\n        } else {\n            throw new Error(`Error! Status ${response.status}`);\n        }\n    }\n\n    return response.data;\n};","import axios from \"axios\";\n\nexport const deletePicture = async (key) => {\n\n    const response = await axios({\n        url: process.env.REACT_APP_API_URL + `/pictures/${key}`,\n        method: \"DELETE\",\n    });\n\n    if ((response.status !== 200) & (response.status !== 201)) {\n        if (response.status === 401) {\n            throw new Error(`Error! Unauthorized(401)`);\n        } else {\n            throw new Error(`Error! Status ${response.status}`);\n        }\n    }\n\n    return response.data;\n};","import React, { useState, useEffect, useCallback, Fragment } from \"react\";\nimport { Drawer, Select } from \"antd\";\nimport {\n  SaveOutlined,\n  DeleteOutlined,\n  QuestionOutlined,\n} from \"@ant-design/icons\";\n\nimport { capitalizeFirstLetter } from \"../../helpers/capitalizeFirstLetter\";\nimport { getTags } from \"./getTags\";\nimport { postTag } from \"./postTag\";\nimport { patchPicture } from \"./patchPicture\";\nimport { deletePicture } from \"./deletePicture\";\n\nimport \"./EditDrawer.css\";\n\nexport const EditDrawer = (props) => {\n  const [tags, setTags] = useState([]);\n  const [allTags, setAllTags] = useState([]);\n  const [confirmDelete, setConfirmDelete] = useState(false);\n  const { Option } = Select;\n\n  const fetchAllTags = useCallback(async () => {\n    try {\n      const fetchedTags = await getTags();\n      setAllTags(fetchedTags);\n    } catch (err) {\n      console.log(err);\n    }\n  }, []);\n\n  const hideDrawer = useCallback(\n    (needReload) => {\n      props.setShowUploader && props.setShowUploader(true);\n      props.setShowDrawer(false);\n      if (needReload) {\n        props.reload();\n      }\n    },\n    [props]\n  );\n\n  useEffect(() => {\n    fetchAllTags();\n    if (JSON.parse(props.picture.tags) !== null) {\n      setTags(JSON.parse(props.picture.tags));\n    }\n  }, [fetchAllTags, props.picture.tags]);\n\n  const handleTagChange = useCallback(async (value) => {\n    const valueCleaned = value.map((oldTag) => {\n      return capitalizeFirstLetter(oldTag);\n    });\n    setTags(valueCleaned);\n  }, []);\n\n  const submitHandler = useCallback(async () => {\n    if (tags.length > 0) {\n      //Add new Tags to db\n      await tags.map(async (newTag) => {\n        const index = allTags.findIndex(\n          (tag) => tag === capitalizeFirstLetter(newTag)\n        );\n        if (index < 0) {\n          //New Tag not found in db\n          const result = await postTag(newTag);\n          if (result.value === \"success\") {\n            console.log(`${newTag} was added to the lists of tags.`);\n          }\n        }\n        return undefined;\n      });\n      //Path picture\n      await patchPicture(tags, props.picture.id);\n      hideDrawer(true);\n    }\n  }, [tags, allTags, hideDrawer, props.picture.id]);\n\n  const deleteHandler = useCallback(\n    async (key) => {\n      if (confirmDelete === true) {\n        //Path picture\n        await deletePicture(key);\n        hideDrawer(true);\n      } else {\n        setConfirmDelete(true);\n        setTimeout(() => {\n          setConfirmDelete(false);\n        }, 2000);\n      }\n    },\n    [confirmDelete, hideDrawer]\n  );\n\n  return (\n    <Drawer\n      title={\n        <span className=\"Drawer__Title\">\n          Edit picture id #{props.picture.id}\n        </span>\n      }\n      placement=\"left\"\n      closable={true}\n      onClose={() => hideDrawer(false)}\n      visible={props.showDrawer}\n      key={`drawer${props.picture.id}`}\n      width=\"42.5%\"\n    >\n      <div className=\"Drawer__font\">Preview:</div>\n      <img\n        className=\"Drawer_picture\"\n        src={props.picture.url_med}\n        alt={props.picture.id}\n        key={props.picture.id}\n        style={{ maxWidth: \"100%\", maxHeight: window.innerHeight / 2.5 }}\n      />\n      <br />\n      <br />\n      <div className=\"Drawer__font\">Tags:</div>\n      <Select\n        mode=\"tags\"\n        allowClear={false}\n        style={{ width: \"100%\" }}\n        placeholder=\"Add some tags\"\n        onChange={handleTagChange}\n        defaultValue={\n          props.picture.tags !== null\n            ? JSON.parse(props.picture.tags)\n            : undefined\n        }\n      >\n        {allTags.map((tag) => {\n          return (\n            <Option key={capitalizeFirstLetter(tag.tag_name)}>\n              {capitalizeFirstLetter(tag.tag_name)}\n            </Option>\n          );\n        })}\n      </Select>\n      <br />\n      <br />\n      <div className=\"Drawer__buttonContainer\">\n        <div\n          className={\n            tags.length < 1 ? \"Drawer__buttonDisabled\" : \"Drawer__button\"\n          }\n          onClick={submitHandler}\n        >\n          <SaveOutlined /> &nbsp; Save\n        </div>\n        <div\n          className={\n            confirmDelete ? \"Drawer__buttonConfirmAction\" : \"Drawer__button\"\n          }\n          onClick={() => deleteHandler(props.picture.key)}\n        >\n          {confirmDelete ? (\n            <Fragment>\n              <DeleteOutlined /> ARE YOU SURE\n              <QuestionOutlined />\n            </Fragment>\n          ) : (\n            <Fragment>\n              <DeleteOutlined />\n              &nbsp; Delete\n            </Fragment>\n          )}\n        </div>\n      </div>\n    </Drawer>\n  );\n};\n","import React, { Fragment, useState } from \"react\";\nimport { EditOutlined } from \"@ant-design/icons\";\n\nimport { EditDrawer } from \"../../../component/EditDrawer/EditDrawer\";\n\nimport \"./EditPictures.css\";\n\nexport const EditPictures = (props) => {\n  const [showEdit, setShowEdit] = useState(false);\n  const [showDrawer, setShowDrawer] = useState(false);\n\n  const mouseHoverHandler = (hover) => {\n    if (props.totalMissingTag === null) {\n      setShowEdit(hover);\n      const element = document.getElementById(props.picture.id);\n      if (hover) {\n        element.style.filter = \"brightness(50%) blur(2px)\";\n      } else {\n        element.style.filter = \"brightness(100%) blur(0px)\";\n      }\n    }\n  };\n\n  const clickHandler = () => {\n    setTimeout(function () {\n      props.setShowUploader(false);\n    }, 300);\n    setShowDrawer(true);\n  };\n\n  return (\n    <Fragment>\n      <EditDrawer\n        picture={props.picture}\n        showDrawer={showDrawer}\n        setShowDrawer={setShowDrawer}\n        reload={props.reload}\n        setShowUploader={props.setShowUploader}\n      />\n      <div className=\"EditPictures__missingPicture\">\n        {props.totalMissingTag === null ? (\n          showEdit && (\n            <div\n              className=\"EditPictures__missingPictureOverText\"\n              onMouseEnter={() => mouseHoverHandler(true)}\n              onMouseLeave={() => mouseHoverHandler(false)}\n              onClick={clickHandler}\n            >\n              <EditOutlined />\n            </div>\n          )\n        ) : (\n          <div className=\"EditPictures__missingPictureRest\">\n            +{props.totalMissingTag}\n          </div>\n        )}\n        <img\n          className={props.totalMissingTag && \"EditPictures__bluryGray\"}\n          id={props.picture.id}\n          src={props.picture.url_thumb}\n          alt={props.picture.id}\n          width={props.size}\n          height={props.size}\n          onMouseEnter={() => mouseHoverHandler(true)}\n          onMouseLeave={() => mouseHoverHandler(false)}\n          onClick={clickHandler}\n        />\n      </div>\n    </Fragment>\n  );\n};\n","import axios from \"axios\";\n\nexport const postPicture = async (file) => {\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n        await axios.post(process.env.REACT_APP_API_URL_UPLOAD, formData)\n        return \"success\"\n        //console.log('Success!', res.data);\n    } catch (err) {\n        console.log(err)\n        return \"error\"\n    }\n} ","import axios from \"axios\";\n\nexport const getDuplicate = async (name) => {\n\n  let requestBody = {\n    \"name\": name,\n  };\n\n  const response = await axios({\n    url: process.env.REACT_APP_API_URL + `/pictures/duplicate`,\n    method: \"POST\",\n    data: requestBody,\n  });\n\n  if ((response.status !== 200) & (response.status !== 201)) {\n    if (response.status === 401) {\n      throw new Error(`Error! Unauthorized(401)`);\n    } else {\n      throw new Error(`Error! Status ${response.status}`);\n    }\n  }\n\n  return response.data;\n\n};","import axios from \"axios\";\n\nexport const getTagsMissing = async (limit) => {\n  const response = await axios({\n    url: process.env.REACT_APP_API_URL + `/pictures/tagsmissing/${limit}`,\n    method: \"GET\",\n  });\n\n  if ((response.status !== 200) & (response.status !== 201)) {\n    if (response.status === 401) {\n      throw new Error(`Error! Unauthorized(401)`);\n    } else {\n      throw new Error(`Error! Status ${response.status}`);\n    }\n  }\n\n  return response.data;\n\n};\n\nexport const getTagsMissingCountAll = async (limit) => {\n  const response = await axios({\n    url: process.env.REACT_APP_API_URL + `/pictures/tagsmissingcount/`,\n    method: \"GET\",\n  });\n\n  if ((response.status !== 200) & (response.status !== 201)) {\n    if (response.status === 401) {\n      throw new Error(`Error! Unauthorized(401)`);\n    } else {\n      throw new Error(`Error! Status ${response.status}`);\n    }\n  }\n\n  //console.log(response.data[0].count);\n  return response.data[0].count;\n\n};","import React, { useState, useEffect, useCallback, Fragment } from \"react\";\nimport {\n  PictureOutlined,\n  LoadingOutlined,\n  FileAddOutlined,\n} from \"@ant-design/icons\";\nimport { notification } from \"antd\";\n\nimport { EditPictures } from \"./EditPictures/EditPictures\";\nimport { postPicture } from \"./postPicture\";\nimport { getDuplicate } from \"./getDuplicate\";\nimport { getTagsMissing, getTagsMissingCountAll } from \"./getTagsMissing\";\n\nimport \"./Uploader.css\";\n\nconst SIZE_PICTURE_MISSING_TAG = 150;\n\nexport const Uploader = () => {\n  const [isUploading, setIsUploading] = useState(false);\n  const [isDragDroping, setIsDragDroping] = useState(false);\n  const [picsTagsMissing, setPicsTagsMissing] = useState([]);\n  const [showUploader, setShowUploader] = useState(true);\n  const [uploadProgress, setUploadProgress] = useState([0, 0]);\n  const [limit, setLimit] = useState(undefined);\n  const [missingCountAll, setMissingCountAll] = useState(null);\n\n  const submitHandler = useCallback(async (file) => {\n    const result = await postPicture(file);\n    notification[result]({\n      message: `Upload ${result}`,\n      description: `File: ${file.name}`,\n    });\n  }, []);\n\n  const fetchTagsMissingCountAll = useCallback(async () => {\n    try {\n      const count = await getTagsMissingCountAll();\n      const countMinusLimit = count - limit;\n      setMissingCountAll(countMinusLimit);\n    } catch (err) {\n      console.log(err);\n    }\n  }, [limit]);\n\n  const calculateMissingTagPicLimit = useCallback(() => {\n    const pageWidth = window.innerWidth;\n    const pageHeight = window.innerHeight;\n    const missingPicContainerWidth = Math.floor(pageWidth * 0.4);\n    const missingPicContainerHeight = Math.floor(pageHeight * (1 - 0.25));\n    const numOfPicFittingInContainer =\n      Math.floor(missingPicContainerWidth / (SIZE_PICTURE_MISSING_TAG + 34)) *\n      Math.floor(missingPicContainerHeight / (SIZE_PICTURE_MISSING_TAG + 30));\n    setLimit(numOfPicFittingInContainer);\n    return numOfPicFittingInContainer;\n  }, []);\n\n  const fetchPicsTagsMissing = useCallback(async () => {\n    try {\n      const limit = await calculateMissingTagPicLimit();\n      const picsTagsMissing = await getTagsMissing(limit);\n      await fetchTagsMissingCountAll();\n      setPicsTagsMissing(picsTagsMissing);\n    } catch (err) {\n      console.log(err);\n    }\n  }, [fetchTagsMissingCountAll, calculateMissingTagPicLimit]);\n\n  const fileSelectHandler = useCallback(\n    async (event) => {\n      setIsUploading(true);\n      if (event.target.files[0]) {\n        const name = event.target.files[0].name.split(\".\")[0];\n        const alreadyIn = await getDuplicate(name);\n        if (alreadyIn.length === 0) {\n          await submitHandler(event.target.files[0]);\n        } else {\n          notification.warning({\n            message: `Duplicate? `,\n            description: `There is already a file named '${event.target.files[0].name}'`,\n          });\n        }\n      }\n      setIsUploading(false);\n      setTimeout(() => {\n        fetchPicsTagsMissing(limit);\n      }, 500);\n    },\n    [fetchPicsTagsMissing, limit, submitHandler]\n  );\n\n  useEffect(() => {\n    fetchPicsTagsMissing();\n    window.addEventListener(\"resize\", calculateMissingTagPicLimit);\n    return () => {\n      window.removeEventListener(\"resize\", calculateMissingTagPicLimit);\n    };\n  }, [fetchPicsTagsMissing, calculateMissingTagPicLimit]);\n\n  const handleDragEnter = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragDroping(true);\n  };\n  const handleDragLeave = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setIsDragDroping(false);\n  };\n  const handleDragOver = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  const handleDrop = async (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    const objectOfFiles = e.dataTransfer.files;\n    const numberOfFiles = objectOfFiles.length;\n    setUploadProgress([0, numberOfFiles]);\n    for (let i = 0; i < numberOfFiles; i++) {\n      setIsUploading(true);\n      setUploadProgress([i, numberOfFiles]);\n      if (objectOfFiles[i]) {\n        const file = objectOfFiles[i];\n        const name = file.name.split(\".\")[0];\n        const alreadyIn = await getDuplicate(name);\n        if (alreadyIn.length === 0) {\n          await submitHandler(file);\n        } else {\n          notification.warning({\n            message: `Duplicate? `,\n            description: `There is already a file named '${name}'`,\n          });\n        }\n      }\n    }\n    setUploadProgress([0, 0]);\n    setIsUploading(false);\n    setTimeout(() => {\n      fetchPicsTagsMissing(limit);\n    }, 1000);\n  };\n\n  return (\n    <div className=\"Uploader__container\">\n      <div className=\"Uploader__formContainer\">\n        {showUploader && (\n          <div\n            className=\"Uploader__formContent\"\n            style={\n              picsTagsMissing.length ? { width: \"50vw\" } : { width: \"100vw\" }\n            }\n          >\n            <form onSubmit={submitHandler}>\n              <input\n                type=\"file\"\n                className=\"inputfile\"\n                name=\"inputfile\"\n                id=\"file\"\n                onChange={fileSelectHandler}\n              />\n              {isUploading ? (\n                <label\n                  htmlFor=\"file\"\n                  style={\n                    picsTagsMissing.length\n                      ? { width: \"35vw\" }\n                      : { width: \"75vw\" }\n                  }\n                >\n                  <LoadingOutlined className=\"Uploader__spinner\" />\n                  {uploadProgress[1] ? (\n                    <p className=\"form-upload-text\">\n                      {uploadProgress[0]} of {uploadProgress[1]}\n                    </p>\n                  ) : (\n                    <p className=\"form-upload-text\">Loading</p>\n                  )}\n                </label>\n              ) : (\n                <label\n                  htmlFor=\"file\"\n                  onDrop={handleDrop}\n                  onDragOver={(e) => handleDragOver(e)}\n                  onDragEnter={(e) => handleDragEnter(e)}\n                  onDragLeave={(e) => handleDragLeave(e)}\n                  style={\n                    picsTagsMissing.length\n                      ? { width: \"35vw\" }\n                      : { width: \"75vw\" }\n                  }\n                >\n                  {!isDragDroping ? (\n                    <Fragment>\n                      <p className=\"form-upload-drag-icon\">\n                        <PictureOutlined />\n                      </p>\n                      <p className=\"form-upload-hint\">\n                        Click, or drag here a file <br />\n                        <i>jpg and png file only</i>\n                      </p>\n                    </Fragment>\n                  ) : (\n                    <Fragment>\n                      <p className=\"form-upload-drag-icon\">\n                        <FileAddOutlined />\n                      </p>\n                      <p className=\"form-upload-hint\">\n                        Drop your files here <br />\n                        <i>Multiple files supported</i>\n                      </p>\n                      <p className=\"form-upload-text\"></p>\n                    </Fragment>\n                  )}\n                </label>\n              )}\n            </form>\n          </div>\n        )}\n      </div>\n      {picsTagsMissing.length > 0 && (\n        <div className=\"Uploader__missingContainer\">\n          <div className=\"Uploader__missingContent\">\n            {picsTagsMissing.map((picture, index) => {\n              return (\n                <EditPictures\n                  picture={picture}\n                  size={SIZE_PICTURE_MISSING_TAG}\n                  setShowUploader={setShowUploader}\n                  key={picture.id}\n                  reload={fetchPicsTagsMissing}\n                  totalMissingTag={index + 1 === limit ? missingCountAll : null}\n                />\n              );\n            })}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","import axios from \"axios\";\n\nexport const postLoginCode = async (code) => {\n\n    const requestBody = {\n        \"code\": code,\n    };\n\n    const response = await axios({\n        url: process.env.REACT_APP_API_URL + `/login/code`,\n        method: \"POST\",\n        data: requestBody,\n    });\n\n    if ((response.status !== 200) & (response.status !== 201)) {\n        if (response.status === 401) {\n            throw new Error(`Error! Unauthorized(401)`);\n        } else {\n            throw new Error(`Error! Status ${response.status}`);\n        }\n    }\n\n    return response;\n};","import React, { Fragment } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport { observer } from \"mobx-react\";\n\nimport { PinInput } from \"./component/PinInput/PinInput\";\nimport { Gallery } from \"./pages/Gallery/Gallery\";\nimport { Uploader } from \"./pages/Uploader/Uploader\";\nimport { userStore } from \"./store/userStore\";\nimport { postLoginCode } from \"./store/calls/postLoginCode\";\n\nimport \"./App.css\";\n\nconst App = observer(() => {\n  const login = async (code) => {\n    const res = await postLoginCode(code);\n    if (res.status === 200) {\n      if (res.data.userId === \"guest\") {\n        userStore.setIsGuest(true);\n      } else {\n        userStore.setIsGuest(false);\n        userStore.fetchuserData();\n      }\n      userStore.setHasAccess(true);\n    }\n  };\n\n  return (\n    <Router>\n      <div className=\"App\">\n        <div className=\"App__main\">\n          <Switch>\n            <Route path=\"/admin\">\n              <Uploader />\n            </Route>\n            <Route path=\"/\">\n              <div className=\"App__flex\">\n                {userStore.hasAccess ? (\n                  <Gallery />\n                ) : (\n                  <Fragment>\n                    <div className=\"App__title\">&nbsp;kinkograph</div>\n                    <PinInput login={login} />\n                    <div className=\"spacer\"></div>\n                  </Fragment>\n                )}\n              </div>\n            </Route>\n          </Switch>\n        </div>\n      </div>\n    </Router>\n  );\n});\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}